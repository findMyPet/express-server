doctype html
html(ng-app = "FindMyPet")
    head
        title= title
        meta(charset='UTF-8')
        meta(name='viewport', content='width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes')
        meta(name='apple-mobile-web-app-capable', content='yes')
        meta(name='mobile-web-app-capable', content='yes')
        title title
        script(src = 'https://ajax.googleapis.com/ajax/libs/angularjs/1.3.3/angular.min.js')
        script(src='/vendor/platform/platform.js')
        
        link(rel='stylesheet', href='/vendor/bootstrap/dist/css/bootstrap.css')
        link(rel='stylesheet', href='//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css')
        link(rel='stylesheet', type='text/css', href='/stylesheets/estilos.css')
        link(rel='import', href='/vendor/core-ajax/core-ajax.html')
        link(rel='import', href='/vendor/core-header-panel/core-header-panel.html')
        link(rel='import', href='/vendor/core-menu/core-menu.html')
        link(rel='import', href='/vendor/core-item/core-item.html')
        link(rel='import', href='/vendor/core-icon-button/core-icon-button.html')
        link(rel='import', href='/vendor/core-icon/core-icon.html')
        link(rel='import', href='/vendor/core-toolbar/core-toolbar.html')
        link(rel='import', href='/vendor/core-input/core-input.html')
        link(rel='import', href='/vendor/core-selector/core-selector.html')
        link(rel='import', href='/vendor/google-map/google-map.html')
        link(rel='import', href='/vendor/google-map/google-map-search.html')
        link(rel='import', href='/vendor/paper-dialog/paper-dialog.html')
        link(rel='import', href='/vendor/paper-dialog/paper-dialog-transition.html')
        link(rel='import', href='/vendor/paper-button/paper-button.html')
        link(rel='import', href='/vendor/paper-input/paper-input.html')
        link(rel='import', href='/vendor/core-scaffold/core-scaffold.html')
        link(rel='import', href='/vendor/polymer/polymer.html')
        link(rel='import', href='/vendor/paper-tabs/paper-tabs.html')

        script(src='//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js')
        script(src='//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js')

        script(src = '/javascripts/appo.js')
    body(fullbleed='fullbleed', vertical='vertical', layout='layout', unresolved='unresolved' ng-controller = "Main")
        core-scaffold
            core-header-panel(navigation flex mode = 'seamed')
                core-toolbar(style = 'background-color: #526E9C;')
                core-menu(theme = 'core-light-theme')
                    paper-tabs( selected = '0' )
                        paper-tab( ng-click = 'list = "todos"' ) Todos
                            a(
                                center-center
                                layout
                            )
                        paper-tab( ng-click = 'list = "perdidos"' ) Perdidos
                            a(
                                center-center
                                layout
                            )
                        paper-tab( ng-click = 'list = "encontrados"' ) Encontrados
                            a(
                                center-center
                                layout
                            )
                    div( ng-switch = 'list' )
                        div( ng-switch-when = 'todos')
                            h1 Todos
                            core-item.foto( src = 'imagenes/panfilo.png')
                                div(flex)
                                    //template#map(is='auto-binding')
                                        core-ajax.api-ajax(auto='auto', url='http://localhost:3000/api/pins', params='{"swLn":"{{$.google_map.sw.ln}}", "swLt":"{{$.google_map.sw.lt}}", "neLn": "{{$.google_map.ne.ln}}", "neLt": "{{$.google_map.ne.lt}}"}', handleas='json', response='{{response}}')
                                        google-map-search#google_map_search(map='{{map}}', query='{{$.core_input.value}}', result='{{location}}')
                                        google-map#google_map(map='{{map}}', latitude='{{location.latitude}}', longitude='{{location.longitude}}', zoom='17', disabledefaultui='disableDefaultUI')
                                            template.template-ajax(repeat='{{response}}')
                                                google-map-marker(latitude='{{location[1]}}', longitude='{{location[0]}}')
                        div( ng-switch-when = 'encontrados')
                            h1 Encontrados
                            core-item.foto( src = '../panfilo.png')
                                div(flex)
                                    .name Panfilo
                                    .descripcionCorta  Gordito pero sexy! 
                                    .address Mi casa es tu casa 
                        div(ng-switch-when = 'perdidos')
                            h1 Perdidos
                            core-item.foto(src = 'imagenes/panfilo.png')
                                div(flex)
                                    .name Panfilo
                                    .descripcionCorta  Gordito pero sexy! 
                                    .address Mi casa es tu casa 
            div(tool flex) FindMyPet
                #bs-example-navbar-collapse-1.collapse.navbar-collapse(style = 'margin-top: -33px;')
                    -if (user){
                        button.btn.btn-custom.navbar-btn.navbar-right.dropdown-toggle= user.local.email
                            span.caret
                        ul.dropdown-menu(role='menu')
                            li
                                a(href='/account') Cuenta
                            li
                                a(href='/logout') Cerrar sesión
                    -} else{
                        a.btn.btn-custom.navbar-btn.navbar-right(href='/login') Iniciar Sesión
                    -}
                    a.add-report.navbar-text.navbar-right(data-toggle="modal", data-target="#newReport")
                        span.glyphicon.glyphicon-plus
            div 
                template#map(is='auto-binding')
                    core-ajax.api-ajax(auto='auto', url='http://localhost:3000/api/pins', params='{"swLn":"{{$.google_map.sw.ln}}", "swLt":"{{$.google_map.sw.lt}}", "neLn": "{{$.google_map.ne.ln}}", "neLt": "{{$.google_map.ne.lt}}"}', handleas='json', response='{{response}}')
                    google-map-search#google_map_search(map='{{map}}', query='{{$.core_input.value}}', result='{{location}}')
                    google-map#google_map(map='{{map}}', latitude='{{location.latitude}}', longitude='{{location.longitude}}', zoom='17', disabledefaultui='disableDefaultUI')
                        template.template-ajax(repeat='{{response}}')
                            google-map-marker(latitude='{{location[1]}}', longitude='{{location[0]}}')
                    #search-box
                        core-field
                            core-input#core_input(willvalidate='willvalidate', placeholder='Busca una dirección o lugar...')
                            core-icon(icon='icons:search')
                    script(src='javascripts/ajax-polymer.js')
                    script(src='javascripts/getLocation.js')
       
        block content